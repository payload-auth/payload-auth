---
title: Plugins Overview
description: Extending payload-auth with Better Auth plugins
---

import { Callout } from 'fumadocs-ui/components/callout';

# Plugins Overview

payload-auth supports Better Auth's plugin system, automatically handling collection generation and schema mapping.

## Supported Plugins

| Plugin | Package | Collections Created |
|--------|---------|-------------------|
| Admin | `better-auth/plugins` | (user fields only) |
| Two Factor | `better-auth/plugins` | `twoFactors` |
| Organization | `better-auth/plugins` | `organizations`, `members`, `invitations`, `teams`, `teamMembers` |
| Passkey | `@better-auth/passkey` | `passkeys` |
| API Key | `@better-auth/api-key` | `apiKeys` |
| Magic Link | `better-auth/plugins` | - |
| Email OTP | `better-auth/plugins` | - |
| Multi-Session | `better-auth/plugins` | - |
| Anonymous | `better-auth/plugins` | - |
| Username | `better-auth/plugins` | - |
| Phone Number | `better-auth/plugins` | - |
| Bearer | `better-auth/plugins` | - |
| OpenID Connect | `better-auth/plugins/oidc` | `oauthApplications`, `oauthAccessTokens`, `oauthConsents` |
| SSO | `@better-auth/sso` | `ssoProviders` |
| JWT | `@better-auth/jwt` | `jwks` |
| Stripe | `@better-auth/stripe` | `subscriptions` |

## Adding Plugins

```ts
import { admin, twoFactor, organization } from 'better-auth/plugins'
import { passkey } from '@better-auth/passkey'

betterAuthPlugin({
  betterAuthOptions: {
    plugins: [
      admin(),
      twoFactor({ issuer: 'My App' }),
      passkey({
        rpID: 'myapp.com',
        rpName: 'My App',
        origin: 'https://myapp.com',
      }),
      organization({
        teams: { enabled: true },
      }),
    ],
  },
})
```

## Client Plugins

Many plugins require a client-side counterpart:

```ts title="lib/auth/client.ts"
import { createAuthClient } from 'better-auth/react'
import { adminClient } from 'better-auth/plugins/admin/client'
import { twoFactorClient } from 'better-auth/plugins/two-factor/client'
import { organizationClient } from 'better-auth/plugins/organization/client'
import { passkeyClient } from '@better-auth/passkey/client'

export const authClient = createAuthClient({
  baseURL: process.env.NEXT_PUBLIC_SERVER_URL,
  plugins: [
    adminClient(),
    twoFactorClient(),
    organizationClient(),
    passkeyClient(),
  ],
})
```

## Overriding Plugin Collections

Use `pluginCollectionOverrides` to customize plugin-generated collections:

```ts
betterAuthPlugin({
  pluginCollectionOverrides: {
    organizations: ({ collection }) => ({
      ...collection,
      fields: [
        ...collection.fields,
        {
          name: 'website',
          type: 'text',
        },
        {
          name: 'logo',
          type: 'upload',
          relationTo: 'media',
        },
      ],
    }),
    passkeys: ({ collection }) => ({
      ...collection,
      admin: {
        ...collection.admin,
        hidden: true,
      },
    }),
  },
})
```

## Hiding Plugin Collections

```ts
betterAuthPlugin({
  hidePluginCollections: true, // Hide all
  // Or hide specific ones:
  pluginCollectionOverrides: {
    twoFactors: ({ collection }) => ({
      ...collection,
      admin: { hidden: true },
    }),
  },
})
```

<Callout type="info">
Collections generated by plugins inherit the `collectionAdminGroup` setting by default.
</Callout>

## Type Safety

Types from plugins are automatically inferred:

```ts
import type { BetterAuthReturn } from 'payload-auth/better-auth'

// Session type includes plugin data
type Session = BetterAuthReturn<typeof pluginOptions>['$Infer']['Session']
// { user: {...}, session: { activeOrganizationId?: string, ... } }
```
