---
title: Organization Plugin
description: Multi-tenant organization and team management
---

import { Callout } from 'fumadocs-ui/components/callout';

# Organization Plugin

Add multi-tenant capabilities with organizations, teams, and role-based access.

## Features

- Create and manage organizations
- Invite members with role-based permissions
- Teams within organizations
- Organization-scoped sessions

## Configuration

```ts
import { organization } from 'better-auth/plugins'

betterAuthPlugin({
  betterAuthOptions: {
    plugins: [
        organization({
        teams: { enabled: true },
        invitationExpiresIn: 7 * 24 * 60 * 60, // 7 days
        
        sendInvitationEmail: async ({ email, inviter, organization, url }) => {
          await payload.sendEmail({
            to: email,
            subject: `Join ${organization.name}`,
            html: `
              <p>${inviter.name} invited you to join ${organization.name}</p>
              <a href="${url}">Accept Invitation</a>
            `,
          })
        },
      }),
    ],
  },
})
```

### Options

| Option | Type | Description |
|--------|------|-------------|
| `teams.enabled` | `boolean` | Enable teams within organizations |
| `invitationExpiresIn` | `number` | Invitation expiry in seconds |
| `sendInvitationEmail` | `function` | Send invitation emails |

## Client Setup

```ts
import { createAuthClient } from 'better-auth/react'
import { organizationClient } from 'better-auth/plugins/organization/client'

export const authClient = createAuthClient({
  baseURL: process.env.NEXT_PUBLIC_SERVER_URL,
  plugins: [organizationClient()],
})
```

## Creating Organizations

```tsx
const { data: org, error } = await authClient.organization.create({
  name: 'Acme Inc',
  slug: 'acme',
    metadata: {
    industry: 'tech',
  },
})
```

## Managing Members

### List Members

```tsx
const { data: members } = await authClient.organization.listMembers({
  organizationId: 'org-id',
})
```

### Invite Member

```tsx
await authClient.organization.inviteMember({
  organizationId: 'org-id',
  email: 'new-member@example.com',
  role: 'member', // 'owner', 'admin', 'member'
})
```

### Accept Invitation

```tsx
// User accepts with the invitation ID
await authClient.organization.acceptInvitation({
  invitationId: 'invitation-id',
})
```

### Update Member Role

```tsx
await authClient.organization.updateMemberRole({
  organizationId: 'org-id',
  memberId: 'member-id',
  role: 'admin',
})
```

### Remove Member

```tsx
await authClient.organization.removeMember({
  organizationId: 'org-id',
  memberId: 'member-id',
})
```

## Active Organization

Set the active organization for the session:

```tsx
await authClient.organization.setActive({
  organizationId: 'org-id',
})

// Access in session
const { data: session } = authClient.useSession()
console.log(session?.session.activeOrganizationId)
```

## Teams

When teams are enabled:

```tsx
// Create a team
const { data: team } = await authClient.organization.createTeam({
  organizationId: 'org-id',
  name: 'Engineering',
})

// Add member to team
await authClient.organization.addTeamMember({
  teamId: 'team-id',
  memberId: 'member-id',
})

// List team members
const { data: teamMembers } = await authClient.organization.listTeamMembers({
  teamId: 'team-id',
})
```

## Organization-Scoped Access

Use organization context in Payload access control:

```ts
import { getPayloadAuth } from 'payload-auth/better-auth'

const Posts = {
  slug: 'posts',
  access: {
    read: async ({ req }) => {
      const { betterAuth } = await getPayloadAuth(config)
      const session = await betterAuth.api.getSession({
        headers: req.headers,
      })
      
      if (!session?.session.activeOrganizationId) {
        return false
      }
      
      return {
        organization: {
          equals: session.session.activeOrganizationId,
        },
      }
    },
  },
  fields: [
    { name: 'title', type: 'text' },
    {
      name: 'organization',
      type: 'relationship',
      relationTo: 'organizations',
    },
  ],
}
```

## Collections Created

| Collection | Purpose |
|------------|---------|
| `organizations` | Organization records |
| `members` | Organization memberships |
| `invitations` | Pending invitations |
| `teams` | Teams within organizations |
| `teamMembers` | Team memberships |

## Customizing Organization Fields

```ts
betterAuthPlugin({
  pluginCollectionOverrides: {
    organizations: ({ collection }) => ({
      ...collection,
      fields: [
        ...collection.fields,
        { name: 'website', type: 'text' },
        { name: 'logo', type: 'upload', relationTo: 'media' },
        {
          name: 'settings',
          type: 'group',
          fields: [
            { name: 'theme', type: 'select', options: ['light', 'dark'] },
            { name: 'timezone', type: 'text' },
          ],
        },
      ],
    }),
  },
})
```

<Callout type="info">
Organization data is automatically synced between Better Auth's schema and Payload collections.
</Callout>
