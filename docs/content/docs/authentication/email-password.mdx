---
title: Email & Password
description: Traditional email/password authentication
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { Callout } from 'fumadocs-ui/components/callout';

# Email & Password

The most common authentication method using email addresses and passwords.

## Configuration

```ts title="payload.config.ts"
betterAuthPlugin({
  betterAuthOptions: {
    emailAndPassword: {
      enabled: true,
      requireEmailVerification: true,
      minPasswordLength: 8,
      maxPasswordLength: 128,
      autoSignIn: false,
    },
  },
})
```

### Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `enabled` | `boolean` | `false` | Enable email/password auth |
| `requireEmailVerification` | `boolean` | `false` | Require verified email to sign in |
| `minPasswordLength` | `number` | `8` | Minimum password length |
| `maxPasswordLength` | `number` | `128` | Maximum password length |
| `autoSignIn` | `boolean` | `false` | Auto sign in after signup |

## Sign Up

### Client-Side

```tsx
'use client'

import { authClient } from '@/lib/auth/client'

export function SignUpForm() {
  const handleSubmit = async (formData: FormData) => {
    const { data, error } = await authClient.signUp.email({
      name: formData.get('name') as string,
      email: formData.get('email') as string,
      password: formData.get('password') as string,
    })
    
    if (error) {
      console.error(error.message)
      return
    }
    
    // Handle success - may need email verification
  }
  
  return (
    <form onSubmit={(e) => {
      e.preventDefault()
      handleSubmit(new FormData(e.currentTarget))
    }}>
      <input name="name" type="text" placeholder="Name" required />
      <input name="email" type="email" placeholder="Email" required />
      <input name="password" type="password" placeholder="Password" required />
      <button type="submit">Sign Up</button>
    </form>
  )
}
```

### Server Action

```ts
'use server'

import { getPayloadAuth } from 'payload-auth/better-auth'
import config from '@payload-config'

export async function signUpAction(formData: FormData) {
  const { betterAuth } = await getPayloadAuth(config)
  
  const { user, error } = await betterAuth.api.signUpEmail({
    body: {
      name: formData.get('name') as string,
      email: formData.get('email') as string,
      password: formData.get('password') as string,
    },
  })
  
  if (error) {
    return { error: error.message }
  }
  
  return { success: true }
}
```

## Sign In

```tsx
const { data, error } = await authClient.signIn.email({
  email: 'user@example.com',
  password: 'password123',
  rememberMe: true, // Longer session
})
```

## Email Verification

### Sending Verification Email

```ts
betterAuthPlugin({
  betterAuthOptions: {
    emailVerification: {
      sendOnSignUp: true,
      autoSignInAfterVerification: true,
      
      sendVerificationEmail: async ({ user, url, token }) => {
        // Use Payload's email system
        const payload = await getPayload({ config })
        await payload.sendEmail({
          to: user.email,
          subject: 'Verify Your Email',
          html: `
            <h1>Verify Your Email</h1>
            <p>Click the link below to verify your email address:</p>
            <a href="${url}">Verify Email</a>
          `,
        })
      },
    },
  },
})
```

### Verification Page

```tsx title="app/verify-email/page.tsx"
'use client'

import { authClient } from '@/lib/auth/client'
import { useSearchParams, useRouter } from 'next/navigation'
import { useEffect, useState } from 'react'

export default function VerifyEmailPage() {
  const searchParams = useSearchParams()
  const router = useRouter()
  const [status, setStatus] = useState<'loading' | 'success' | 'error'>('loading')
  
  useEffect(() => {
    const token = searchParams.get('token')
    if (!token) {
      setStatus('error')
      return
    }
    
    authClient.verifyEmail({ token })
      .then(({ error }) => {
        if (error) {
          setStatus('error')
        } else {
          setStatus('success')
          setTimeout(() => router.push('/dashboard'), 2000)
        }
      })
  }, [searchParams, router])
  
  return (
    <div>
      {status === 'loading' && <p>Verifying...</p>}
      {status === 'success' && <p>Email verified! Redirecting...</p>}
      {status === 'error' && <p>Verification failed. Link may be expired.</p>}
    </div>
  )
}
```

## Password Reset

### Configuration

```ts
betterAuthPlugin({
  betterAuthOptions: {
    emailAndPassword: {
      enabled: true,
      
      sendResetPassword: async ({ user, url, token }) => {
        await payload.sendEmail({
          to: user.email,
          subject: 'Reset Your Password',
          html: `
            <h1>Reset Your Password</h1>
            <p>Click the link below to reset your password:</p>
            <a href="${url}">Reset Password</a>
            <p>This link expires in 1 hour.</p>
          `,
        })
      },
    },
  },
})
```

### Request Reset

```tsx
const { error } = await authClient.forgetPassword({
  email: 'user@example.com',
  redirectTo: '/reset-password',
})
```

### Reset Password Page

```tsx
'use client'

import { authClient } from '@/lib/auth/client'
import { useSearchParams } from 'next/navigation'

export function ResetPasswordForm() {
  const searchParams = useSearchParams()
  const token = searchParams.get('token')
  
  const handleSubmit = async (formData: FormData) => {
    const { error } = await authClient.resetPassword({
      newPassword: formData.get('password') as string,
      token: token!,
    })
    
    if (error) {
      // Handle error
      return
    }
    
    // Success - redirect to login
  }
  
  if (!token) {
    return <p>Invalid reset link</p>
  }
  
  return (
    <form onSubmit={(e) => {
      e.preventDefault()
      handleSubmit(new FormData(e.currentTarget))
    }}>
      <input name="password" type="password" placeholder="New Password" required />
      <input name="confirm" type="password" placeholder="Confirm Password" required />
      <button type="submit">Reset Password</button>
    </form>
  )
}
```

## Password Change

Allow authenticated users to change their password:

```tsx
const { error } = await authClient.changePassword({
  currentPassword: 'oldPassword',
  newPassword: 'newPassword',
})
```

<Callout type="info">
When `disableDefaultPayloadAuth` is false, payload-auth integrates with Payload's password hashing for compatibility with existing users.
</Callout>
