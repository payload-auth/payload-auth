import { filterProps, getValidFieldPropertyKeysForType } from "./filter-properties";
function getRuleBasedFieldProperties({ field }, fieldRules = []) {
    return fieldRules.reduce((acc, rule)=>{
        const conditionMatch = !rule.condition || rule.condition(field);
        if (conditionMatch) {
            Object.assign(acc, rule.transform(field));
        }
        return acc;
    }, {});
}
export const getAdditionalFieldProperties = ({ field, fieldKey, fieldRules = [], additionalProperties = {} })=>{
    const ruleProps = getRuleBasedFieldProperties({
        field
    }, fieldRules);
    const specificProps = additionalProperties[fieldKey]?.(field) ?? {};
    const mergedProps = {
        ...ruleProps,
        ...specificProps
    };
    const type = mergedProps.type;
    // get valid field property keys for the type of the field after merging the rules and the additional properties
    const validFieldPropertyKeysForType = getValidFieldPropertyKeysForType(type);
    return filterProps(mergedProps, validFieldPropertyKeysForType);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9iZXR0ZXItYXV0aC9wbHVnaW4vbGliL2J1aWxkLWNvbGxlY3Rpb25zL3V0aWxzL21vZGVsLWZpZWxkLXRyYW5zZm9ybWF0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGaWVsZFJ1bGUgfSBmcm9tICdAL2JldHRlci1hdXRoL3BsdWdpbi90eXBlcydcbmltcG9ydCB0eXBlIHsgREJGaWVsZEF0dHJpYnV0ZSB9IGZyb20gJ2JldHRlci1hdXRoL2RiJ1xuaW1wb3J0IHR5cGUgeyBGaWVsZCB9IGZyb20gJ3BheWxvYWQnXG5pbXBvcnQgeyBmaWx0ZXJQcm9wcywgZ2V0VmFsaWRGaWVsZFByb3BlcnR5S2V5c0ZvclR5cGUgfSBmcm9tICcuL2ZpbHRlci1wcm9wZXJ0aWVzJ1xuXG5mdW5jdGlvbiBnZXRSdWxlQmFzZWRGaWVsZFByb3BlcnRpZXMoeyBmaWVsZCB9OiB7IGZpZWxkOiBEQkZpZWxkQXR0cmlidXRlIH0sIGZpZWxkUnVsZXM6IEZpZWxkUnVsZVtdID0gW10pOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIHJldHVybiBmaWVsZFJ1bGVzLnJlZHVjZTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oKGFjYywgcnVsZSkgPT4ge1xuICAgIGNvbnN0IGNvbmRpdGlvbk1hdGNoID0gIXJ1bGUuY29uZGl0aW9uIHx8IHJ1bGUuY29uZGl0aW9uKGZpZWxkKVxuXG4gICAgaWYgKGNvbmRpdGlvbk1hdGNoKSB7XG4gICAgICBPYmplY3QuYXNzaWduKGFjYywgcnVsZS50cmFuc2Zvcm0oZmllbGQpKVxuICAgIH1cblxuICAgIHJldHVybiBhY2NcbiAgfSwge30pXG59XG5cbmV4cG9ydCBjb25zdCBnZXRBZGRpdGlvbmFsRmllbGRQcm9wZXJ0aWVzID0gKHtcbiAgZmllbGQsXG4gIGZpZWxkS2V5LFxuICBmaWVsZFJ1bGVzID0gW10sXG4gIGFkZGl0aW9uYWxQcm9wZXJ0aWVzID0ge31cbn06IHtcbiAgZmllbGQ6IERCRmllbGRBdHRyaWJ1dGVcbiAgZmllbGRLZXk6IHN0cmluZ1xuICBmaWVsZFJ1bGVzPzogRmllbGRSdWxlW11cbiAgYWRkaXRpb25hbFByb3BlcnRpZXM/OiB7IFtrZXk6IHN0cmluZ106IChmaWVsZDogREJGaWVsZEF0dHJpYnV0ZSkgPT4gUGFydGlhbDxGaWVsZD4gfVxufSk6IFBhcnRpYWw8RmllbGQ+ID0+IHtcbiAgY29uc3QgcnVsZVByb3BzID0gZ2V0UnVsZUJhc2VkRmllbGRQcm9wZXJ0aWVzKHsgZmllbGQgfSwgZmllbGRSdWxlcylcbiAgY29uc3Qgc3BlY2lmaWNQcm9wcyA9IGFkZGl0aW9uYWxQcm9wZXJ0aWVzW2ZpZWxkS2V5XT8uKGZpZWxkKSA/PyB7fVxuICBjb25zdCBtZXJnZWRQcm9wcyA9IHsgLi4ucnVsZVByb3BzLCAuLi5zcGVjaWZpY1Byb3BzIH1cbiAgY29uc3QgdHlwZSA9IG1lcmdlZFByb3BzLnR5cGUgYXMgRmllbGRbJ3R5cGUnXVxuICAvLyBnZXQgdmFsaWQgZmllbGQgcHJvcGVydHkga2V5cyBmb3IgdGhlIHR5cGUgb2YgdGhlIGZpZWxkIGFmdGVyIG1lcmdpbmcgdGhlIHJ1bGVzIGFuZCB0aGUgYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gIGNvbnN0IHZhbGlkRmllbGRQcm9wZXJ0eUtleXNGb3JUeXBlID0gZ2V0VmFsaWRGaWVsZFByb3BlcnR5S2V5c0ZvclR5cGUodHlwZSlcbiAgcmV0dXJuIGZpbHRlclByb3BzKG1lcmdlZFByb3BzIGFzIGFueSwgdmFsaWRGaWVsZFByb3BlcnR5S2V5c0ZvclR5cGUgYXMgYW55KVxufVxuIl0sIm5hbWVzIjpbImZpbHRlclByb3BzIiwiZ2V0VmFsaWRGaWVsZFByb3BlcnR5S2V5c0ZvclR5cGUiLCJnZXRSdWxlQmFzZWRGaWVsZFByb3BlcnRpZXMiLCJmaWVsZCIsImZpZWxkUnVsZXMiLCJyZWR1Y2UiLCJhY2MiLCJydWxlIiwiY29uZGl0aW9uTWF0Y2giLCJjb25kaXRpb24iLCJPYmplY3QiLCJhc3NpZ24iLCJ0cmFuc2Zvcm0iLCJnZXRBZGRpdGlvbmFsRmllbGRQcm9wZXJ0aWVzIiwiZmllbGRLZXkiLCJhZGRpdGlvbmFsUHJvcGVydGllcyIsInJ1bGVQcm9wcyIsInNwZWNpZmljUHJvcHMiLCJtZXJnZWRQcm9wcyIsInR5cGUiLCJ2YWxpZEZpZWxkUHJvcGVydHlLZXlzRm9yVHlwZSJdLCJtYXBwaW5ncyI6IkFBR0EsU0FBU0EsV0FBVyxFQUFFQyxnQ0FBZ0MsUUFBUSxzQkFBcUI7QUFFbkYsU0FBU0MsNEJBQTRCLEVBQUVDLEtBQUssRUFBK0IsRUFBRUMsYUFBMEIsRUFBRTtJQUN2RyxPQUFPQSxXQUFXQyxNQUFNLENBQTBCLENBQUNDLEtBQUtDO1FBQ3RELE1BQU1DLGlCQUFpQixDQUFDRCxLQUFLRSxTQUFTLElBQUlGLEtBQUtFLFNBQVMsQ0FBQ047UUFFekQsSUFBSUssZ0JBQWdCO1lBQ2xCRSxPQUFPQyxNQUFNLENBQUNMLEtBQUtDLEtBQUtLLFNBQVMsQ0FBQ1Q7UUFDcEM7UUFFQSxPQUFPRztJQUNULEdBQUcsQ0FBQztBQUNOO0FBRUEsT0FBTyxNQUFNTywrQkFBK0IsQ0FBQyxFQUMzQ1YsS0FBSyxFQUNMVyxRQUFRLEVBQ1JWLGFBQWEsRUFBRSxFQUNmVyx1QkFBdUIsQ0FBQyxDQUFDLEVBTTFCO0lBQ0MsTUFBTUMsWUFBWWQsNEJBQTRCO1FBQUVDO0lBQU0sR0FBR0M7SUFDekQsTUFBTWEsZ0JBQWdCRixvQkFBb0IsQ0FBQ0QsU0FBUyxHQUFHWCxVQUFVLENBQUM7SUFDbEUsTUFBTWUsY0FBYztRQUFFLEdBQUdGLFNBQVM7UUFBRSxHQUFHQyxhQUFhO0lBQUM7SUFDckQsTUFBTUUsT0FBT0QsWUFBWUMsSUFBSTtJQUM3QixnSEFBZ0g7SUFDaEgsTUFBTUMsZ0NBQWdDbkIsaUNBQWlDa0I7SUFDdkUsT0FBT25CLFlBQVlrQixhQUFvQkU7QUFDekMsRUFBQyJ9