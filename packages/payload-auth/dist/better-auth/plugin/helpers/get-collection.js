import { flattenAllFields } from "payload";
export function getCollectionByModelKey(collections, modelKey) {
    const collection = Object.values(collections).find((c)=>{
        return c.config?.custom?.betterAuthModelKey === modelKey || c.config?.slug === modelKey;
    });
    if (!collection) {
        throw new Error(`Collection with key ${modelKey} not found`);
    }
    return collection.config;
}
/**
 * Retrieves the field name from a collection based on the field key
 *
 * This function searches through the fields of a collection to find a field
 * that has a matching custom property betterAuthFieldKey.
 *
 * @param collection - The collection configuration to search through
 * @param model - The model key of the collection (This is really just for type hinting)
 * @param fieldKey - The key of the field to search for
 * @returns The name of the field if found, otherwise the field key itself
 */ export function getCollectionFieldNameByFieldKey(collection, model, fieldKey) {
    const fields = flattenAllFields({
        fields: collection.fields
    });
    return fields.find((f)=>f.custom?.betterAuthFieldKey === fieldKey)?.name ?? fieldKey;
}
export function getCollectionFieldNameByFieldKeyUntyped(collection, fieldKey) {
    const fields = flattenAllFields({
        fields: collection.fields
    });
    return fields.find((f)=>f.custom?.betterAuthFieldKey === fieldKey || f.name === fieldKey)?.name ?? fieldKey;
}
/**
 * Retrieves the field key from a collection based on the collection field name
 *
 * This function searches through the fields of a collection to find a field
 * that has a matching name.
 *
 * @param collection - The collection configuration to search through
 * @param fieldName - The name of the field to search for
 * @returns The key of the field if found, otherwise the field name itself
 */ export function getFieldKeyByCollectionFieldName(collection, fieldName) {
    const fields = flattenAllFields({
        fields: collection.fields
    });
    return fields.find((f)=>f.name === fieldName)?.custom?.betterAuthFieldKey ?? fieldName;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9iZXR0ZXItYXV0aC9wbHVnaW4vaGVscGVycy9nZXQtY29sbGVjdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJldHRlckF1dGhGdWxsU2NoZW1hLCBNb2RlbEtleSB9IGZyb20gJ0AvYmV0dGVyLWF1dGgvZ2VuZXJhdGVkLXR5cGVzJ1xuaW1wb3J0IHsgZmxhdHRlbkFsbEZpZWxkcywgdHlwZSBDb2xsZWN0aW9uLCB0eXBlIENvbGxlY3Rpb25Db25maWcgfSBmcm9tICdwYXlsb2FkJ1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29sbGVjdGlvbkJ5TW9kZWxLZXkoY29sbGVjdGlvbnM6IFJlY29yZDxzdHJpbmcsIENvbGxlY3Rpb24+LCBtb2RlbEtleTogTW9kZWxLZXkgfCBzdHJpbmcpOiBDb2xsZWN0aW9uQ29uZmlnIHtcbiAgY29uc3QgY29sbGVjdGlvbiA9IE9iamVjdC52YWx1ZXMoY29sbGVjdGlvbnMpLmZpbmQoKGMpID0+IHtcbiAgICByZXR1cm4gYy5jb25maWc/LmN1c3RvbT8uYmV0dGVyQXV0aE1vZGVsS2V5ID09PSBtb2RlbEtleSB8fCBjLmNvbmZpZz8uc2x1ZyA9PT0gbW9kZWxLZXlcbiAgfSlcblxuICBpZiAoIWNvbGxlY3Rpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvbGxlY3Rpb24gd2l0aCBrZXkgJHttb2RlbEtleX0gbm90IGZvdW5kYClcbiAgfVxuXG4gIHJldHVybiBjb2xsZWN0aW9uLmNvbmZpZ1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgZmllbGQgbmFtZSBmcm9tIGEgY29sbGVjdGlvbiBiYXNlZCBvbiB0aGUgZmllbGQga2V5XG4gKlxuICogVGhpcyBmdW5jdGlvbiBzZWFyY2hlcyB0aHJvdWdoIHRoZSBmaWVsZHMgb2YgYSBjb2xsZWN0aW9uIHRvIGZpbmQgYSBmaWVsZFxuICogdGhhdCBoYXMgYSBtYXRjaGluZyBjdXN0b20gcHJvcGVydHkgYmV0dGVyQXV0aEZpZWxkS2V5LlxuICpcbiAqIEBwYXJhbSBjb2xsZWN0aW9uIC0gVGhlIGNvbGxlY3Rpb24gY29uZmlndXJhdGlvbiB0byBzZWFyY2ggdGhyb3VnaFxuICogQHBhcmFtIG1vZGVsIC0gVGhlIG1vZGVsIGtleSBvZiB0aGUgY29sbGVjdGlvbiAoVGhpcyBpcyByZWFsbHkganVzdCBmb3IgdHlwZSBoaW50aW5nKVxuICogQHBhcmFtIGZpZWxkS2V5IC0gVGhlIGtleSBvZiB0aGUgZmllbGQgdG8gc2VhcmNoIGZvclxuICogQHJldHVybnMgVGhlIG5hbWUgb2YgdGhlIGZpZWxkIGlmIGZvdW5kLCBvdGhlcndpc2UgdGhlIGZpZWxkIGtleSBpdHNlbGZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbGxlY3Rpb25GaWVsZE5hbWVCeUZpZWxkS2V5PE0gZXh0ZW5kcyBNb2RlbEtleT4oXG4gIGNvbGxlY3Rpb246IENvbGxlY3Rpb25Db25maWcsXG4gIG1vZGVsOiBNLFxuICBmaWVsZEtleTogRXh0cmFjdDxrZXlvZiBCZXR0ZXJBdXRoRnVsbFNjaGVtYVtNXSwgc3RyaW5nPlxuKTogc3RyaW5nIHtcbiAgY29uc3QgZmllbGRzID0gZmxhdHRlbkFsbEZpZWxkcyh7IGZpZWxkczogY29sbGVjdGlvbi5maWVsZHMgfSlcbiAgcmV0dXJuIGZpZWxkcy5maW5kKChmKSA9PiBmLmN1c3RvbT8uYmV0dGVyQXV0aEZpZWxkS2V5ID09PSBmaWVsZEtleSk/Lm5hbWUgPz8gZmllbGRLZXlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbGxlY3Rpb25GaWVsZE5hbWVCeUZpZWxkS2V5VW50eXBlZChjb2xsZWN0aW9uOiBDb2xsZWN0aW9uQ29uZmlnLCBmaWVsZEtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgZmllbGRzID0gZmxhdHRlbkFsbEZpZWxkcyh7IGZpZWxkczogY29sbGVjdGlvbi5maWVsZHMgfSlcbiAgcmV0dXJuIGZpZWxkcy5maW5kKChmKSA9PiBmLmN1c3RvbT8uYmV0dGVyQXV0aEZpZWxkS2V5ID09PSBmaWVsZEtleSB8fCBmLm5hbWUgPT09IGZpZWxkS2V5KT8ubmFtZSA/PyBmaWVsZEtleVxufVxuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgZmllbGQga2V5IGZyb20gYSBjb2xsZWN0aW9uIGJhc2VkIG9uIHRoZSBjb2xsZWN0aW9uIGZpZWxkIG5hbWVcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHNlYXJjaGVzIHRocm91Z2ggdGhlIGZpZWxkcyBvZiBhIGNvbGxlY3Rpb24gdG8gZmluZCBhIGZpZWxkXG4gKiB0aGF0IGhhcyBhIG1hdGNoaW5nIG5hbWUuXG4gKlxuICogQHBhcmFtIGNvbGxlY3Rpb24gLSBUaGUgY29sbGVjdGlvbiBjb25maWd1cmF0aW9uIHRvIHNlYXJjaCB0aHJvdWdoXG4gKiBAcGFyYW0gZmllbGROYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZpZWxkIHRvIHNlYXJjaCBmb3JcbiAqIEByZXR1cm5zIFRoZSBrZXkgb2YgdGhlIGZpZWxkIGlmIGZvdW5kLCBvdGhlcndpc2UgdGhlIGZpZWxkIG5hbWUgaXRzZWxmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWVsZEtleUJ5Q29sbGVjdGlvbkZpZWxkTmFtZShjb2xsZWN0aW9uOiBDb2xsZWN0aW9uQ29uZmlnLCBmaWVsZE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGZpZWxkcyA9IGZsYXR0ZW5BbGxGaWVsZHMoeyBmaWVsZHM6IGNvbGxlY3Rpb24uZmllbGRzIH0pXG4gIHJldHVybiBmaWVsZHMuZmluZCgoZikgPT4gZi5uYW1lID09PSBmaWVsZE5hbWUpPy5jdXN0b20/LmJldHRlckF1dGhGaWVsZEtleSA/PyBmaWVsZE5hbWVcbn1cbiJdLCJuYW1lcyI6WyJmbGF0dGVuQWxsRmllbGRzIiwiZ2V0Q29sbGVjdGlvbkJ5TW9kZWxLZXkiLCJjb2xsZWN0aW9ucyIsIm1vZGVsS2V5IiwiY29sbGVjdGlvbiIsIk9iamVjdCIsInZhbHVlcyIsImZpbmQiLCJjIiwiY29uZmlnIiwiY3VzdG9tIiwiYmV0dGVyQXV0aE1vZGVsS2V5Iiwic2x1ZyIsIkVycm9yIiwiZ2V0Q29sbGVjdGlvbkZpZWxkTmFtZUJ5RmllbGRLZXkiLCJtb2RlbCIsImZpZWxkS2V5IiwiZmllbGRzIiwiZiIsImJldHRlckF1dGhGaWVsZEtleSIsIm5hbWUiLCJnZXRDb2xsZWN0aW9uRmllbGROYW1lQnlGaWVsZEtleVVudHlwZWQiLCJnZXRGaWVsZEtleUJ5Q29sbGVjdGlvbkZpZWxkTmFtZSIsImZpZWxkTmFtZSJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsZ0JBQWdCLFFBQWdELFVBQVM7QUFFbEYsT0FBTyxTQUFTQyx3QkFBd0JDLFdBQXVDLEVBQUVDLFFBQTJCO0lBQzFHLE1BQU1DLGFBQWFDLE9BQU9DLE1BQU0sQ0FBQ0osYUFBYUssSUFBSSxDQUFDLENBQUNDO1FBQ2xELE9BQU9BLEVBQUVDLE1BQU0sRUFBRUMsUUFBUUMsdUJBQXVCUixZQUFZSyxFQUFFQyxNQUFNLEVBQUVHLFNBQVNUO0lBQ2pGO0lBRUEsSUFBSSxDQUFDQyxZQUFZO1FBQ2YsTUFBTSxJQUFJUyxNQUFNLENBQUMsb0JBQW9CLEVBQUVWLFNBQVMsVUFBVSxDQUFDO0lBQzdEO0lBRUEsT0FBT0MsV0FBV0ssTUFBTTtBQUMxQjtBQUVBOzs7Ozs7Ozs7O0NBVUMsR0FDRCxPQUFPLFNBQVNLLGlDQUNkVixVQUE0QixFQUM1QlcsS0FBUSxFQUNSQyxRQUF3RDtJQUV4RCxNQUFNQyxTQUFTakIsaUJBQWlCO1FBQUVpQixRQUFRYixXQUFXYSxNQUFNO0lBQUM7SUFDNUQsT0FBT0EsT0FBT1YsSUFBSSxDQUFDLENBQUNXLElBQU1BLEVBQUVSLE1BQU0sRUFBRVMsdUJBQXVCSCxXQUFXSSxRQUFRSjtBQUNoRjtBQUVBLE9BQU8sU0FBU0ssd0NBQXdDakIsVUFBNEIsRUFBRVksUUFBZ0I7SUFDcEcsTUFBTUMsU0FBU2pCLGlCQUFpQjtRQUFFaUIsUUFBUWIsV0FBV2EsTUFBTTtJQUFDO0lBQzVELE9BQU9BLE9BQU9WLElBQUksQ0FBQyxDQUFDVyxJQUFNQSxFQUFFUixNQUFNLEVBQUVTLHVCQUF1QkgsWUFBWUUsRUFBRUUsSUFBSSxLQUFLSixXQUFXSSxRQUFRSjtBQUN2RztBQUVBOzs7Ozs7Ozs7Q0FTQyxHQUNELE9BQU8sU0FBU00saUNBQWlDbEIsVUFBNEIsRUFBRW1CLFNBQWlCO0lBQzlGLE1BQU1OLFNBQVNqQixpQkFBaUI7UUFBRWlCLFFBQVFiLFdBQVdhLE1BQU07SUFBQztJQUM1RCxPQUFPQSxPQUFPVixJQUFJLENBQUMsQ0FBQ1csSUFBTUEsRUFBRUUsSUFBSSxLQUFLRyxZQUFZYixRQUFRUyxzQkFBc0JJO0FBQ2pGIn0=